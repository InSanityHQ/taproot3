

* Thing

First, we will define equations for the distance as a function of $t$. (Note that both $h_{0}$ and $\theta$ are parameters but aren't shown as arguments to the function.)

\begin{cases}
x(t) &= v_{0} \cos{(\theta)} t \\
y(t) &= -\frac{1}{2}gt^2 + v_{0} \sin{(\theta)} t + h_{0} \\
\end{cases}

Velocity is a function of $h_0$:

\begin{equation}
v_{0} = \sqrt{2g(H-h_{0})}
\end{equation}

We can rewrite $x(t)$ and $y(t)$:

\begin{cases}
x(t) &= \sqrt{2g(H-h_{0})} \cos{(\theta)}t \\
y(t) &= -\frac{1}{2}gt^2 + \sqrt{2g(H-h_{0})} \sin{\theta}t + h_0 \\
\end{cases}

We can get $t_f$ in terms of $x$:

\begin{aligned}
t_f &= \frac{x_f}{\sqrt{2g(H-h_0)}\cos{(\theta)}} \\
&= \frac{x_f}{v_0 \cos{(\theta)}} \\
\end{aligned}

We can now get $y_f$ in terms of $x_f$:

\begin{aligned}
y_f &= -\frac{1}{2}g(\frac{x_f}{v_0\cos{(\theta)}})^2 + v_0 \sin{(\theta)}\frac{x_f}{v_0 \cos{(\theta)}} + h_0 \\
&= -\frac{gx_{f}^2}{2v_{0}^2 \cos^2{(\theta)}} + x_f \tan{(\theta)} + h_0
\end{aligned}

We set $y_f$ to equal 0 and differentiate both sides:

\begin{aligned}
\frac{d}{d\theta}[0] &= \frac{d}{d\theta}[-\frac{gx_{f}^2}{2v_0^{2} \cos^2{(\theta)}}] + \frac{d}{d\theta}[x_f \tan{(\theta)}] + \frac{d}{d\theta}[h_0] \\
0 &= -\frac{g}{2v_0}(\frac{2\cos^2{(\theta)} x'_f x_f + 2x^2_f \cos{(\theta)}\sin{(\theta)}}{\cos^4{(\theta)}}) + x'_f \tan{(\theta)} + x_f \sec^2{(\theta)}\\
\end{aligned}

We can simplify this further:

\begin{aligned}
0 &= -\frac{gx'_f x_f}{v_0 \cos^2{(\theta)}} - \frac{gx^2_f \tan{(\theta)}}{v_0\cos^2{(\theta)}} + x'_f \tan{(\theta)} + \frac{x_f}{\cos^2{(\theta)}} \\
\end{aligned}

Solving for $\tan{(\theta)}$:

\begin{aligned}
\tan{(\theta)} (x'_f - \frac{gx^2_f}{v_0 \cos^2{(\theta)}}) &= \frac{gx'_fx_f - v_0x_f}{v_0 \cos^2{(\theta)}} \\
\tan{(\theta)} (\frac{v_0 x'_f \cos^2{(\theta)} - gx^2_f}{v_0 \cos^2{(\theta)}}) &= \frac{gx'_fx_f - v_0x_f}{v_0 \cos^2{(\theta)}}
\end{aligned}
